# Crust: Allwinner sunxi SoC用のLibre SCPファームウェア

## 何か？

Crustは美味しいフルーツパイの最下層のコンポーネントです。同様に、
Crustは$FRUIT（Banana、Orange、Lichee）Piシングルボードコンピュータや
Pine64 PinebookやPinePhoneなどのAllwinnerベースのデバイスで動作する
最低レベルのファームウェアコンポーネントです。

Crustはディープスリープ状態を実装することでバッテリーの寿命と熱性能を
改善します。ディープスリープ中はCPUコアとDRAMコントローラ、ほとんどの
オンボード周辺機器の電源がオフになり、アイドル状態のデバイスと比較して
消費電力が80%以上削減されます。PMICを搭載していないボードでは、Crustは
デバイスの電源を正しくオン/オフすることも担当します。

これを機能させりために、CrustはメインCPUとDRAMの外側でSystem Control
Processor（SCP）と呼ばれる常時稼働の専用マイクロプロセッサ上で動作します。
CrustはAllwinnerのAR100という特定のSCP実装上で動作するように設計されて
います。

Crustはディープスリープのメカニズムを提供するだけであることに注意して
ください。システムのスリープポリシーを指示するものではありません。
具体的には、Crustはスリープに入るタイミングを決定しません。それをするのは
Linuxカーネルかユーザスペースのソフトウェアです。また、1つの例外（IR
リモコンのキー押下をlistenする）を除いて、Crustはシステムをいつ起床させる
かも決定しません。Linuxによりプログラムされた通りにハードウェがそれを
行います。Crustは、Linuxの電源管理インタフェースのほとんど目に見えない
実装になるように設計されています。

Crustが実行時にLinuxやその他のファームウェアコンポーネントとどのように
相互作用するかについての詳細な説明は[CrustのABIドキュメント](abi.md)を
参照してください。

興味のあるユーザや貢献しようとする人はOFTCの`#linux-sunxi`に参加して、
ファームウェアや他のソフトウェアとの統合について議論することを推奨します。

## サポート済みのデバイス

Crustは以下の表に記載されているSoCを搭載したあらゆるボードをサポートして
います。基本的な機能にはボード固有のコードは必要ない。テスト済みで動作が確認されているボードは、リポジトリにdefconfigファイルがあります。それ以外のものについては、似たようなボードのdefconfigを使うか、make configかmake nconfigを実行して適切なオプションを選んでください（多くはありません）。
